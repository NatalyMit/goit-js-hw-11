{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst formEl = document.querySelector('.form-seach');\nconst galleryEl = document.querySelector('.gallery-images');\n\nconst API_KEY = '41909271-8b5dab2225a1cd5a9757159a5';\n\nfunction checkResponse(res) {\n  if (!res.ok) {\n    throw new Error(res.status);\n  }\n  return res.json();\n}\n\nfunction fetchGallery(images) {\n  return fetch(\n    'https://pixabay.com/api/?key=' +\n      API_KEY +\n      '&q=' +\n      images +\n      '&image_type=photo&orientation=horizontal&safesearch=true&per_page=9'\n  ).then(checkResponse);\n}\nformEl.addEventListener('submit', handleSearch);\n\nconst lightbox = new SimpleLightbox('.gallery-images a', {\n  captionDelay: 250,\n});\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const inputValue = form.elements.query.value;\n  if (!inputValue) {\n    iziToast.show({\n      title: 'error',\n      messageColor: 'white',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topCenter',\n      color: 'red',\n    });\n    return;\n  }\n\n  console.log(inputValue);\n\n  fetchGallery(inputValue)\n    .then(data => {\n      //   console.log(data);\n      const hits = data.hits;\n      //   console.log(hits);\n      if (!data.total) {\n        iziToast.show({\n          title: 'error',\n          messageColor: 'white',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topCenter',\n          color: 'red',\n        });\n        return;\n      }\n      let markup = '';\n      for (const hit of hits) {\n        // console.log(hit);\n        markup += createGallery(hit);\n      }\n\n      galleryEl.innerHTML = markup;\n      lightbox.refresh();\n      console.log(markup);\n    })\n    .catch(error => console.log(error))\n    .finally(() => form.reset());\n}\n\nfunction createGallery({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class = \"list-item\">\n    <a href=\"${largeImageURL}\" ><img class=\"search-image\" src = \"${webformatURL}\" alt = \"${tags}\" ><div class=\"options\">\n    <p class=\"options-item\"> likes:<span class=\"options-item-span\">${likes}</span></p>\n    <p class=\"options-item\"> views:<span class=\"options-item-span\">${views}</span></p>\n    <p class=\"options-item\"> comments:<span class=\"options-item-span\">${comments}</span></p>\n    <p class=\"options-item\"> downloads:<span class=\"options-item-span\">${downloads}</span></p></div>\n  \n    </a>\n    \n    </li>`;\n}\n\n// gallery.on('show.simplelightbox', fetchGallery);\n"],"names":["formEl","galleryEl","API_KEY","checkResponse","res","fetchGallery","images","handleSearch","lightbox","SimpleLightbox","event","form","inputValue","iziToast","data","hits","markup","hit","createGallery","error","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAY,SAAS,cAAc,iBAAiB,EAEpDC,EAAU,qCAEhB,SAASC,EAAcC,EAAK,CAC1B,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACb,CAEA,SAASC,EAAaC,EAAQ,CAC5B,OAAO,MACL,gCACEJ,EACA,MACAI,EACA,qEACN,EAAI,KAAKH,CAAa,CACtB,CACAH,EAAO,iBAAiB,SAAUO,CAAY,EAE9C,MAAMC,EAAW,IAAIC,EAAe,oBAAqB,CACvD,aAAc,GAChB,CAAC,EAED,SAASF,EAAaG,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAOD,EAAM,cACbE,EAAaD,EAAK,SAAS,MAAM,MACvC,GAAI,CAACC,EAAY,CACfC,EAAS,KAAK,CACZ,MAAO,QACP,aAAc,QACd,QACE,2EACF,SAAU,YACV,MAAO,KACb,CAAK,EACD,MACD,CAED,QAAQ,IAAID,CAAU,EAEtBP,EAAaO,CAAU,EACpB,KAAKE,GAAQ,CAEZ,MAAMC,EAAOD,EAAK,KAElB,GAAI,CAACA,EAAK,MAAO,CACfD,EAAS,KAAK,CACZ,MAAO,QACP,aAAc,QACd,QACE,2EACF,SAAU,YACV,MAAO,KACjB,CAAS,EACD,MACD,CACD,IAAIG,EAAS,GACb,UAAWC,KAAOF,EAEhBC,GAAUE,EAAcD,CAAG,EAG7BhB,EAAU,UAAYe,EACtBR,EAAS,QAAO,EAChB,QAAQ,IAAIQ,CAAM,CACxB,CAAK,EACA,MAAMG,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMR,EAAK,MAAK,CAAE,CAC/B,CAEA,SAASO,EAAc,CACrB,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,eACML,wCAAoDD,aAAwBE;AAAA,qEACtBC;AAAA,qEACAC;AAAA,wEACGC;AAAA,yEACCC;AAAA;AAAA;AAAA;AAAA,UAKzE"}